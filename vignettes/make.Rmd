---
title: "Make and model data in STATS19"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Make and model data in STATS19}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  eval = FALSE
)
```

```{r setup}
# install.packages("stats19")
library(stats19)
library(dplyr)
```

# Make and model data

```{r}
# usethis::edit_r_environ() # and set STATS19_DOWNLOAD_DIRECTORY to keep the data files
vehicles = get_stats19(type = "vehicle", year = 1979) 
```

```{r}
presence_table <- vehicles |>
  select(year = collision_year, make_model = generic_make_model) |>
  filter(!is.na(make_model)) |>
  distinct() |>
  mutate(present = 1) |>
  pivot_wider(
   names_from = year,
    values_from = present,
    values_fill = 0,
   names_sort = TRUE
  ) |>
  arrange(make_model)
```

```{r}
glimpse(presence_table)
```